import{o as c,s as u,r as s,i as f,a as g,b as d,c as m,d as p,g as y,m as k,e as S,f as P,h as N,j as h,k as w}from"../chunks/chunk-Cfwzkj7l.js";function C(){window.addEventListener("popstate",v)}async function v(){const{isNewHistoryEntry:t,previous:i,current:e}=c();t||await H(i,e)}async function H(t,i){const e=i.state.scrollPosition||void 0;if(r(i.url)===r(t.url)&&i.url!==t.url){u(e);return}const o=i.state.triggeredBy==="user"||t.state.triggeredBy==="user",l=!i.state.timestamp||!t.state.timestamp?null:i.state.timestamp<t.state.timestamp;await s({scrollTarget:e,isBackwardNavigation:l,doNotRenderIfSamePage:o})}function r(t){return t.split("#")[0]}function B(){document.addEventListener("click",L)}async function L(t){if(!T(t))return;const i=A(t.target);if(!i)return;const e=i.getAttribute("href");if(e===null)return;if(e.includes("#")&&f(e)){t.preventDefault(),g(e.split("#")[1]);return}if(d(i))return;t.preventDefault();let n;{const a=i.getAttribute("keep-scroll-position");a!==null&&(n={preserveScroll:a!=="false"})}await s({scrollTarget:n,urlOriginal:e,isBackwardNavigation:!1})}function T(t){return t.button===0&&!t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey}function A(t){for(;t.tagName!=="A";){const{parentNode:i}=t;if(!i)return null;t=i}return t}async function R(){E();const t=b();B(),m(),await t}async function b(){p(y()===0),await s({scrollTarget:{preserveScroll:!0},isBackwardNavigation:null,isClientSideNavigation:!1})}function E(){k(),S(),P(),N(),C()}h();w();R();
